<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MundoTEA - Criar & Colorir</title>
    <link rel="icon" type="image/png" href="imagens/logo_mundotea.png">
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>

    <!-- ======= CABEÃ‡ALHO PADRÃƒO ======= -->
    <header class="header">
        <div class="logo">
            <img src="imagens/logo_mundotea.png" alt="Logo MundoTEA">
            <h1 class="titulo-site">
                <span class="mundo">Mundo</span><span class="tea">TEA</span>
            </h1>
        </div>

        <div class="user-actions">
            <a href="perfil.html" class="profile-icon">
                <img src="imagens/iconegenerico.png" alt="Perfil UsuÃ¡rio">
            </a>
        </div>
    </header>

    <!-- ======= CONTEÃšDO PRINCIPAL ======= -->
    <main class="colorir-container">

        <section class="colorir-titulo-area">
            <h1>ðŸŽ¨ Criar & Colorir</h1>
        </section>

        <div class="colorir-conteudo">

            <!-- LISTA LATERAL DE DESENHOS -->
            <aside class="colorir-desenhos-lista">

                <div class="colorir-desenho-item">
                    <img src="imagens/foguete-colorir.jpg" alt="" data-img="imagens/foguete-colorir.jpg">
                    <button class="colorir-btn-escolher">Escolher</button>
                </div>

                <div class="colorir-desenho-item">
                    <img src="imagens/castelo-colorir.jpg" alt="" data-img="imagens/castelo-colorir.jpg">
                    <button class="colorir-btn-escolher">Escolher</button>
                </div>

                <div class="colorir-desenho-item">
                    <img src="imagens/monstro-colorir.jpg" alt="" data-img="imagens/monstro-colorir.jpg">
                    <button class="colorir-btn-escolher">Escolher</button>
                </div>

                <div class="colorir-desenho-item">
                    <img src="imagens/reino-colorir.jpg" alt="" data-img="imagens/reino-colorir.jpg">
                    <button class="colorir-btn-escolher">Escolher</button>
                </div>

            </aside>

            <!-- ÃREA CENTRAL DO DESENHO -->
            <section class="colorir-area-desenho">

                <!-- TROQUEI IMG POR CANVAS -->
                <canvas id="canvas-desenho" width="500" height="500"></canvas>

                <div class="voltar-container">
                    <a href="index.html" class="btn-voltar">Voltar ao Menu</a>
                </div>
            </section>

            <!-- FERRAMENTAS -->
            <aside class="colorir-ferramentas">

                <div class="colorir-icones">
                    <div id="btnPincel"><img src="imagens/pincel.png" alt=""> Pincel</div>
                    <div><img src="imagens/lapis.png" alt=""> LÃ¡pis</div>
                    <div><img src="imagens/preencher.png" alt=""> Preencher</div>
                    <div><img src="imagens/gota.png" alt=""> Tinta</div>
                    <div id="btnBorracha"><img src="imagens/borracha.png" alt=""> Borracha</div>
                    <div id="btnLimpar"><img src="imagens/lixeira.png" alt=""> Apagar</div>
                </div>

                <div class="colorir-paleta">
                    <span class="cor" data-cor="#ff0000" style="background:#ff0000"></span>
                    <span class="cor" data-cor="#ff8000" style="background:#ff8000"></span>
                    <span class="cor" data-cor="#ffff00" style="background:#ffff00"></span>
                    <span class="cor" data-cor="#00cc00" style="background:#00cc00"></span>
                    <span class="cor" data-cor="#0066ff" style="background:#0066ff"></span>
                    <span class="cor" data-cor="#8000ff" style="background:#8000ff"></span>
                    <span class="cor" data-cor="#ff00ff" style="background:#ff00ff"></span>
                    <span class="cor" data-cor="#000000" style="background:#000000"></span>
                    <span class="cor" data-cor="#ffffff" style="background:#ffffff; border:1px solid #ccc"></span>
                </div>

                <button class="colorir-btn-acao azul">Desfazer</button>
                <button class="colorir-btn-acao verde">Salvar</button>

            </aside>

        </div>
    </main>

    <!-- ========= JAVASCRIPT ========= -->
    <script>
        const canvas = document.getElementById("canvas-desenho");
        const ctx = canvas.getContext("2d");

        let desenhando = false;
        let corAtual = "#000000";
        let modo = "pincel"; // ou "borracha"
        let imagemAtual = new Image();

        // =============== CARREGAR IMAGEM NO CANVAS ===============
        function carregarDesenho(src) {
            imagemAtual.src = src;
            imagemAtual.onload = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(imagemAtual, 0, 0, canvas.width, canvas.height);
            };
        }

        // Carrega o monstro ao abrir
        window.onload = () => {
            carregarDesenho("imagens/monstro-colorir.jpg");
        };

        // =============== TROCAR DESENHO AO CLICAR EM ESCOLHER ===============
        document.querySelectorAll(".colorir-btn-escolher").forEach(btn => {
            btn.addEventListener("click", () => {
                const nova = btn.parentElement.querySelector("img").dataset.img;
                carregarDesenho(nova);
            });
        });

        // =============== PALETA ===============
        document.querySelectorAll(".cor").forEach(c => {
            c.addEventListener("click", () => {
                corAtual = c.dataset.cor;
                modo = "pincel";
            });
        });

        // =============== PINCEL ===============
        canvas.addEventListener("mousedown", () => desenhando = true);
        canvas.addEventListener("mouseup", () => { desenhando = false; ctx.beginPath(); });
        canvas.addEventListener("mouseleave", () => { desenhando = false; ctx.beginPath(); });

        canvas.addEventListener("mousemove", (e) => {
            if (!desenhando) return;

            const bounds = canvas.getBoundingClientRect();
            const x = e.clientX - bounds.left;
            const y = e.clientY - bounds.top;

            ctx.lineWidth = 10;
            ctx.lineCap = "round";

            ctx.strokeStyle = modo === "borracha" ? "white" : corAtual;

            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        });

        // =============== BORRACHA ===============
        document.getElementById("btnBorracha").addEventListener("click", () => {
            modo = "borracha";
        });

        // =============== LIMPAR TUDO ===============
        document.getElementById("btnLimpar").addEventListener("click", () => {
            carregarDesenho(imagemAtual.src); // recarrega o desenho sem pintura
        });

        // =============== PINCEL NORMAL ===============
        document.getElementById("btnPincel").addEventListener("click", () => {
            modo = "pincel";
        });
    </script>

</body>
</html>
